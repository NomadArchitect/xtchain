From ec231dd4c9ceb09140178b79e30ed0917bb2c955 Mon Sep 17 00:00:00 2001
From: belliash <belliash@codingworkshop.eu.org>
Date: Sat, 25 Mar 2023 19:33:33 +0100
Subject: [PATCH] test2

---
 bfd/config.bfd    | 8 +++++++-
 gas/configure.tgt | 3 ++-
 2 files changed, 9 insertions(+), 2 deletions(-)

diff --git a/bfd/config.bfd b/bfd/config.bfd
index 1b0111fd410..ada7889d362 100644
--- a/bfd/config.bfd
+++ b/bfd/config.bfd
@@ -249,7 +249,7 @@ case "${targ}" in
     targ_selvecs="aarch64_elf64_be_vec aarch64_elf32_le_vec aarch64_elf32_be_vec arm_elf32_le_vec arm_elf32_be_vec aarch64_pei_le_vec aarch64_pe_le_vec"
     want64=true
     ;;
-  aarch64-*-pe*)
+  aarch64-*-pe* | aarch64-*-mingw32)
     targ_defvec=aarch64_pe_le_vec
     targ_selvecs="aarch64_pe_le_vec aarch64_pei_le_vec"
     want64=true
@@ -409,6 +409,12 @@ case "${targ}" in
     targ_selvecs="arm_pe_le_vec arm_pe_be_vec arm_pei_le_vec arm_pei_be_vec"
     targ_underscore=yes
     ;;
+  arm-*-mingw32)
+    targ_defvec=arm_pe_le_vec
+    targ_selvecs="arm_pe_le_vec arm_pe_be_vec arm_pei_le_vec arm_pei_be_vec"
+    targ_underscore=no
+    targ_cflags="-DARM_COFF_BUGFIX"
+    ;;
   arm-*-phoenix*)
     targ_defvec=arm_elf32_le_vec
     targ_selvecs=arm_elf32_be_vec
diff --git a/gas/configure.tgt b/gas/configure.tgt
index 765ba73633d..9bfef1f72e8 100644
--- a/gas/configure.tgt
+++ b/gas/configure.tgt
@@ -136,6 +136,7 @@ case ${generic_target} in
   aarch64*-*-netbsd*)			fmt=elf em=nbsd;;
   aarch64*-*-openbsd*)			fmt=elf;;
   aarch64*-*-pe*)			fmt=coff em=pepaarch64 ;;
+  aarch64*-*-mingw32)		fmt=coff em=pepaarch64 ;;
   alpha-*-*vms*)			fmt=evax ;;
   alpha-*-osf*)				fmt=ecoff ;;
   alpha-*-linux*ecoff*)			fmt=ecoff ;;
@@ -163,7 +164,7 @@ case ${generic_target} in
   arm-*-nto*)				fmt=elf ;;
   arm-wince-pe | arm-*-wince | arm*-*-mingw32ce* | arm*-*-cegcc*)
 					fmt=coff em=wince-pe ;;
-  arm-*-pe)				fmt=coff em=pe ;;
+  arm-*-pe | arm-*-mingw32)	fmt=coff em=pe ;;
   arm-*-fuchsia*)			fmt=elf ;;
   arm-*-haiku*)				fmt=elf em=haiku ;;
 
-- 
2.39.2

